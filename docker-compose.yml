version: "3.9"

services:
  click-system:
    build: .
    container_name: agentic-options-click
    env_file: .env
    ports:
      - "${PORT:-3000}:3000"
    volumes:
      - ./logs:/app/logs
    depends_on:
      - mock-bank
    networks:
      - click-net
    restart: unless-stopped

  mock-bank:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: mock-bank-portal
    command: ["node", "-e", "import('./dist/mock-bank-server.js')"]
    ports:
      - "${MOCK_BANK_PORT:-3001}:3001"
    networks:
      - click-net

networks:
  click-net:
    driver: bridge
